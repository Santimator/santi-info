{{/* Generic card renderer for links, projects, practices, etc. */}}
{{ $theme := .Page.Params.theme }}
{{ $key := .key }}

{{/* Map theme to data path */}}
{{ $dataMap := dict "terminal" "engineering" "blackboard" "teaching" "classic" "engineering" "organic" "personal_development" "celestial" "astrology" "artist" "the_artist" "hyperion" "other_interests" }}
{{ $sectionName := index $dataMap $theme | default "engineering" }}

{{ $data := index .Page.Site.Data $sectionName }}
{{ $dataset := index $data $key }}

{{ with $dataset }}
  {{ with .items }}
    <section class="cv-section">
      <div class="cv-inner">
        <div class="cv-section-header">
          <h2>{{ title $key }}</h2>
        </div>
        <div class="cv-cards">
          {{ range . }}
            {{ $item := . }}
            <article class="cv-card">
              {{/* Handle different data structures based on available fields */}}
              {{ with $item.label }}<h3>{{ . }}</h3>{{ end }}
              {{ with $item.title }}<h3>{{ . }}</h3>{{ end }}
              {{ with $item.name }}<h3>{{ . }}</h3>{{ end }}
              {{ if $item.language }}<h3>{{ $item.language }} â€” {{ $item.level }}</h3>{{ end }}
              {{ if $item.planet }}<h3>{{ $item.planet }} in {{ $item.sign }}</h3>{{ end }}
              {{ with $item.description }}<p>{{ . }}</p>{{ end }}
              {{ with $item.notes }}<p>{{ . }}</p>{{ end }}
              {{ with $item.details }}
                <ul class="cv-list">
                  {{ range . }}<li>{{ . }}</li>{{ end }}
                </ul>
              {{ end }}
              {{ with $item.responsibilities }}
                <ul class="cv-list">
                  {{ range . }}<li>{{ . }}</li>{{ end }}
                </ul>
              {{ end }}
              {{ with $item.url }}<a href="{{ . }}" target="_blank" rel="noopener">Visit</a>{{ end }}
            </article>
          {{ end }}
        </div>
      </div>
    </section>
  {{ end }}
{{ end }}
